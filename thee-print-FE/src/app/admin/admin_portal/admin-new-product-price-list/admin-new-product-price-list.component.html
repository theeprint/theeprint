<div class="container">
    <div class="row m-0 pt-20 pb-20 d-flex flex-column">
        <div class="d-flex align-items-center">
            <span class="back-page">
                <a class="c-pointer text-black" routerLink = "/admin/partners-list" style="text-decoration: none;">
                    <svg width="18" height="12" viewbox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 5H3.83L7.41 1.41L6 0L0 6L6 12L7.41 10.59L3.83 7H18V5Z" fill="#C70039" stroke="#C70039" stroke-width="0"/>
                    </svg>
                    <span class="mr-15 ml-10 fs-16" style="color:#C70039;">Back to partnerâ€™s details</span>
                </a>    
            </span>
        </div>
        <div class="d-flex align-items-center mt-30" *ngIf="partner_details">
            <p class="update-price-list">Update Price List for <span class="text-id">{{partner_details.partner_company}}</span></p>
        </div>
    </div>
</div>
    <div class="col-12">
        

    <ng-container>
        <div class="container mb-50" style="background-color: #fff; width:84% !important;">
            <div class="row">
                <div class="col-6 mt-20">
                    <ul class="nav custom-tab">
                        <li class="leftTab c-pointer text-center pr-45 pl-45 p-13 " (click)="goToNppl()" >
                            Current Price List
                        </li>
                        <li class="c-pointer text-center pr-45 pl-45 p-13 ml-10 active">
                            New Product Price List
                        </li>
                    </ul>
                </div>
            </div>
            <div class="row m-0 p-20 d-flex align-items-center">
                <div class="d-flex align-items-center">
                </div>
                <div class="ml-auto">
                    <div class="btn-group h-42" dropdown>
                        <button id="button-basic" dropdownToggle type="button" class="btn-upload ml-20 d-flex align-items-center justify-content-between"
                         aria-controls="dropdown-basic"> 
                            <svg class="mr-5" width="12" height="14" viewBox="0 0 12 14" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 5.125H8.25V0.625H3.75V5.125H0.75L6 10.375L11.25 5.125ZM5.25 6.625V2.125H6.75V6.625H7.6275L6 8.2525L4.3725 6.625H5.25ZM11.25 13.375V11.875H0.75V13.375H11.25Z" fill="#C0024A"/>
                            </svg>
                            Import CSV instead
                        </button>
                        <ul id="dropdown-basic" *dropdownMenu class="dropdown-menu"role="menu" aria-labelledby="button-basic" style="width: 180% !important;">
                            <div class="container">
                                <div class="step completed">
                                    <div class="v-stepper">
                                        <div class="circle" style="color: #ffffff;">1</div>
                                        <div class="line"></div>
                                    </div>
                                    <div class="content">
                                        <p class="text-header fs-16 fw-700">Download the .CSV file</p>
                                        <button class="bttn btn-primary-pink d-flex align-items-center" (click)="exportCsv();">
                                            <svg class="mr-2" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path fill-rule="evenodd" clip-rule="evenodd" d="M17.4173 8.70833H13.7507V3.20833H8.25065V8.70833H4.58398L11.0007 15.125L17.4173 8.70833ZM10.084 10.5417V5.04167H11.9173V10.5417H12.9898L11.0007 12.5308L9.01149 10.5417H10.084ZM17.4173 18.7917V16.9583H4.58398V18.7917H17.4173Z" fill="white"/>
                                                </svg>
                                            Download CSV                                            
                                        </button>
                                    </div>
                                </div>
                                <div class="step completed">
                                    <div class="v-stepper">
                                        <div class="circle" style="color: #ffffff;">2</div>
                                        <div class="line"></div>
                                    </div>
                                
                                    <div class="content">
                                        <p class="text-header fs-16 fw-700">Edit the .CSV file</p>
                                        <p class="text-secondary fs-14">Make the changes to the file you downloaded. Do not delete any columns.</p>
                                    </div>
                                </div>
                                <div class="step completed">
                                    <div class="v-stepper">
                                        <div class="circle" style="color: #ffffff;">3</div>
                                    </div>
        
                                    <div class="content">
                                        <p class="text-header fs-16 fw-700">Upload the .CSV file</p>
                                        <div class="dropzone d-flex align-items-center">
                                            <input type="file" #fileDropRef id="fileDropRef" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" (change)="fileBrowseHandler($event)"/>
                                            <div class="mr-2 mt-5">
                                                <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M23.7493 26.125V16.625H30.0827L18.9993 5.54167L7.91602 16.625H14.2493V26.125H23.7493ZM18.9993 10.0225L22.4352 13.4583H20.5827V22.9583H17.416V13.4583H15.5635L18.9993 10.0225ZM30.0827 32.4583V29.2917H7.91602V32.4583H30.0827Z" fill="#C0024A"/>
                                                </svg>
                                            </div>
                                            <div class="d-flex flex-column">
                                                <span class="text-header fs-14 fw-700">Drag & Drop or Browse</span>
                                                <span class="text-secondary fs-12 tL">Upload the edited .CSV file</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>
            <hr class="mt-10 mr--15 ml--15">
            <div class="container bg-white">
                <form [formGroup]="productForms" class="w-100-per"> 
                <table class="table mt-20 w-100-per">
                    <thead>
                    <tr>
                        <th class="update-table w-12-per">Machine Print</th>
                        <th class="update-table w-20-per">Media</th>
                        <th class="update-table w-27-per">Specs/Description</th>
                        <th class="update-table w-18-per">Price per square <p>inch (Php)</p></th>
                        <th class="update-table w-18-per">Price per square <p>feet (Php)</p></th>
                    </tr>
                    </thead>
                   
                    <tbody *ngIf="product_prices">
                    <tr *ngFor="let products of product_prices; index as idx" class="table-dashboard c-pointer pt-20 pb-20">
                        <td class="fs-16">
                            <div class="d-flex align-items-center justify-content-start">
                                {{products.machine_print}}
                            </div>
                        </td>
                        <td class="fs-16">
                            <div class="d-flex align-items-center">
                                {{products.product_media}} 
                            </div>
                        </td>
                        <td class="fs-16">
                            <div class="d-flex align-items-center">
                                {{products.product_description}}
                            </div>
                        </td>
                        <td class="fs-16" formArrayName="sqm1">
                            <div class="d-flex align-items-center">
                            <input type="text" class="price_input" placeholder="0.00" [formControlName]="idx" (keypress)="keyPressNumbers($event)" name="price_sqm1">
                            </div>
                        </td>
                        <td class="fs-16" formArrayName="sqf1">
                            <div class="d-flex align-items-center">
                                <input type="text" class="price_input" placeholder="0.00" [formControlName]="idx" name="price_sqf1" (keypress)="keyPressNumbers($event)">
                            </div> 
                        </td>
                        <td style="display:none;" formArrayName="product_price_id1">
                            <input type="text" class="price_input" placeholder="0.00" [formControlName]="idx" name="product_price_id1">
                        </td>
                    </tr>
                    </tbody>
                </table>
                </form>
                <hr class="mt-10 mr--15 ml--15">
                <div class="col-md-6 offset-6 d-flex justify-content-end pb-20 mt-40">
                    <button class="btn-cancel">Cancel</button>
                    <button class="bttn btn-primary-pink d-flex align-items-center" (click)="updateProductPrice()">
                        <svg class="mr-5" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M2.58333 0.75H13.5833L17.25 4.41667V15.4167C17.25 16.425 16.425 17.25 15.4167 17.25H2.58333C1.56583 17.25 0.75 16.425 0.75 15.4167V2.58333C0.75 1.575 1.56583 0.75 2.58333 0.75ZM15.4167 15.4167V5.1775L12.8225 2.58333H2.58333V15.4167H15.4167ZM9 9C7.47833 9 6.25 10.2283 6.25 11.75C6.25 13.2717 7.47833 14.5 9 14.5C10.5217 14.5 11.75 13.2717 11.75 11.75C11.75 10.2283 10.5217 9 9 9ZM11.75 3.5H3.5V7.16667H11.75V3.5Z" fill="white"/>
                        </svg>
                        Save Changes                                    
                    </button>
                </div>
            </div>
        </div>
    </ng-container>
   </div>
<ngx-smart-modal #priceadd identifier="priceadd" [customClass]="'modal-checkin-class nsm-centered'">
    <div class="card-body">
        <div class="d-flex justify-content-center">
            <svg width="68" height="68" viewBox="0 0 51 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle opacity="0.2" cx="25.5" cy="25.5" r="25.5" fill="#DD1003"/>
                <circle cx="25.8333" cy="25.8333" r="19.8333" fill="#DD1003"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M30.9998 29.75V24.75C30.9998 21.68 29.3698 19.11 26.4998 18.43V17.75C26.4998 16.92 25.8298 16.25 24.9998 16.25C24.1698 16.25 23.4998 16.92 23.4998 17.75V18.43C20.6398 19.11 18.9998 21.67 18.9998 24.75V29.75L16.9998 31.75V32.75H32.9998V31.75L30.9998 29.75ZM24.9998 35.75C26.0998 35.75 26.9998 34.85 26.9998 33.75H22.9998C22.9998 34.85 23.8998 35.75 24.9998 35.75ZM20.9998 30.75H28.9998V24.75C28.9998 22.27 27.4898 20.25 24.9998 20.25C22.5098 20.25 20.9998 22.27 20.9998 24.75V30.75ZM20.5798 17.83L19.1498 16.4C16.7498 18.23 15.1698 21.05 15.0298 24.25H17.0298C17.1798 21.6 18.5398 19.28 20.5798 17.83ZM34.9698 24.25H32.9698C32.8198 21.6 31.4498 19.28 29.4298 17.83L30.8498 16.4C33.2398 18.23 34.8198 21.05 34.9698 24.25Z" fill="white"/>
            </svg>  
        </div> 
        <div class="mt-30 d-flex justify-content-center">
            <p class="fs-20 fw-700 text-header">Unable to update price list!</p>
        </div>
        <div class="mt-15 d-flex justify-content-center">
            <p class="fs-14 text-detail tC pl-100 pr-100">Please fill up all the price fields to continue.</p>
        </div>
    </div>
</ngx-smart-modal>

<ngx-smart-modal #success identifier="success" [customClass]="'modal-checkin-class nsm-centered'" closable="false">
    <div class="card-body">
        <div class="d-flex justify-content-center">
            <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.08" fill-rule="evenodd" clip-rule="evenodd" d="M34 -1.03315e-06C52.7782 -1.03315e-06 68 15.2231 68 33.9992C68 52.7769 52.7782 68 34 68C15.2218 68 0 52.7769 0 33.9992C0 15.2231 15.2218 -1.03315e-06 34 -1.03315e-06Z" fill="#049561"/>
                <path d="M28.6585 40.4583L21.7085 33.5083L19.3418 35.8583L28.6585 45.175L48.6585 25.175L46.3085 22.825L28.6585 40.4583Z" fill="#00A651"/>
            </svg> 
        </div> 
        <div class="mt-30 d-flex justify-content-center">
            <p class="fs-20 fw-700 text-header">Price list successfully updated!</p>
        </div>
        <div class="mt-15 d-flex justify-content-center">
            <p class="fs-14 text-detail tC pl-100 pr-100">All changes on the price list has been successfully saved in our database</p>
        </div>
        <div class="mt-15 d-flex justify-content-center">
            <button class="bttn btn-primary-pink d-flex align-items-center justify-content-center" (click)="closeModal()" routerLink="/admin/partners-details/{{partner_details.user_id}}">Go Back to Partner Details</button>
        </div>     
    </div>
</ngx-smart-modal>

<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-spin" [fullScreen] = "true"><p style="color: white" > loading... </p></ngx-spinner>