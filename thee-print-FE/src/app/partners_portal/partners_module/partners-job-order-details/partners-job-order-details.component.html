<ng-container *ngIf="job_order_details">
    <div class="container pt-40 pb-40">
        <div class="row d-flex flex-column">
            <span class="back-page">
                <a class="c-pointer text-black" routerLink = "/partners/partners_dashboard" style="text-decoration: none;">
                    <svg width="18" height="12" viewbox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 5H3.83L7.41 1.41L6 0L0 6L6 12L7.41 10.59L3.83 7H18V5Z" fill="#C70039" stroke="#C70039" stroke-width="0"/>
                    </svg>
                    <span class="mr-15 ml-10 back-to-dashboard">Back to Dashboard</span>
                </a>    
            </span>
            <div class="d-flex align-items-center mt-15">
                <div class="job-order-no text-safari">Job Order No: <span class="text-id fs-24 fw-800 text-safari">{{job_order_details.job_order_quote_num}}</span></div>
                <div class="d-flex ml-auto">
                    <button *ngIf="job_order_details.job_order_status == 2" class="btn-delete-req d-flex align-items-center mr-15" style="justify-content: space-evenly;" (click)="delete()">
                        <svg class="mr-10" width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9.42857 8.07812V17.3594C9.42857 17.6441 9.16472 17.875 8.83929 17.875H7.66071C7.33528 17.875 7.07143 17.6441 7.07143 17.3594V8.07812C7.07143 7.79337 7.33528 7.5625 7.66071 7.5625H8.83929C9.16472 7.5625 9.42857 7.79337 9.42857 8.07812ZM14.3393 7.5625H13.1607C12.8353 7.5625 12.5714 7.79337 12.5714 8.07812V17.3594C12.5714 17.6441 12.8353 17.875 13.1607 17.875H14.3393C14.6647 17.875 14.9286 17.6441 14.9286 17.3594V8.07812C14.9286 7.79337 14.6647 7.5625 14.3393 7.5625ZM20.8214 3.4375C21.4723 3.4375 22 3.8992 22 4.46875V4.98438C22 5.26913 21.7361 5.5 21.4107 5.5H20.4286V19.9375C20.4286 21.0766 19.3733 22 18.0714 22H3.92857C2.62674 22 1.57143 21.0766 1.57143 19.9375V5.5H0.589286C0.263853 5.5 0 5.26913 0 4.98438V4.46875C0 3.8992 0.527656 3.4375 1.17857 3.4375H4.83268L6.50321 1.00134C6.71264 0.695935 7.00888 0.443185 7.36309 0.267705C7.7173 0.0922253 8.11741 -3.42658e-06 8.52446 0L13.4756 0C13.8826 -3.42658e-06 14.2827 0.0922253 14.637 0.267705C14.9912 0.443185 15.2874 0.695935 15.4968 1.00134L17.1673 3.4375H20.8214ZM7.5816 3.4375H14.4184L13.5614 2.18767C13.5353 2.14949 13.4982 2.1179 13.4539 2.09596C13.4097 2.07403 13.3597 2.0625 13.3088 2.0625H8.69133C8.64044 2.0625 8.59043 2.07403 8.54615 2.09596C8.50188 2.1179 8.46485 2.14949 8.43867 2.18767L7.5816 3.4375ZM18.0714 5.5H3.92857V19.6797C3.92857 19.7481 3.95961 19.8136 4.01487 19.862C4.07013 19.9103 4.14507 19.9375 4.22321 19.9375H17.7768C17.8549 19.9375 17.9299 19.9103 17.9851 19.862C18.0404 19.8136 18.0714 19.7481 18.0714 19.6797V5.5Z" fill="#DD1003"/>
                            </svg>
                        <span class="fs-16 fw-500">Cancel Request</span>                         
                    </button>
                    <button *ngIf="job_order_details.job_order_status == 5 || job_order_details.job_order_status == 4 || job_order_details.job_order_status == 7" class="btn-delete-req d-flex align-items-center mr-15" style="justify-content: space-evenly;" (click)="moveToArchived(job_order_details.job_order_request_id)">
                        <svg class="mr-10" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18.3314 8.33333H16.6667V5.83333C16.6667 4.4526 15.9205 3.33333 15 3.33333H9.44445L7.22223 0H1.66667C0.746181 0 0 1.11927 0 2.5V17.5C0 18.8807 0.746181 20 1.66667 20H15.5556C15.8382 20 16.1163 19.8921 16.3635 19.6866C16.6108 19.4811 16.8191 19.1846 16.9689 18.825L19.7447 12.1583C20.4373 10.496 19.6392 8.33333 18.3314 8.33333ZM1.875 2.5H6.53188L8.7541 5.83333H14.7917C14.8469 5.83333 14.8999 5.86626 14.939 5.92486C14.9781 5.98347 15 6.06295 15 6.14583V8.33333H5.27778C4.99067 8.33333 4.70844 8.44459 4.45842 8.65631C4.20841 8.86803 3.99909 9.17303 3.85077 9.54177L1.66667 14.9713V2.81214C1.66667 2.77111 1.67206 2.7305 1.68253 2.6926C1.693 2.65471 1.70835 2.62028 1.7277 2.59129C1.74705 2.5623 1.77002 2.53932 1.79529 2.52365C1.82057 2.50799 1.84765 2.49995 1.875 2.5ZM15.5556 17.5H2.5L5.18174 10.8333H18.3333L15.5556 17.5Z" fill="#DD1003"/>
                            </svg>                        
                        <span class="fs-16 fw-500">Move to archive</span>                         
                    </button>

                    <a class="btn-download-pdf d-flex align-items-center" style="justify-content: space-evenly;" href='http://api.theeprint.com.ph/api/public/email/job-order-request.php?id={{job_order_request_id}}' target="_blank">
                        <svg class="mr-10" width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M13.4168 5.70837H9.75016V0.208374H4.25016V5.70837H0.583496L7.00016 12.125L13.4168 5.70837ZM6.0835 7.54171V2.04171H7.91683V7.54171H8.98933L7.00016 9.53088L5.011 7.54171H6.0835ZM13.4168 15.7917V13.9584H0.583496V15.7917H13.4168Z" fill="white"/>
                            </svg>
                        <span class="fs-16 fw-500" (click)="download()">Download PDF</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
</ng-container>
<ng-container *ngIf="job_order_details">
<div id="table" class="container mt-20 mb-40" style="background-color: #fff; padding: 20px 40px 0px 40px !important;">
    <div class="status-stepper p-20 mt-25 h-200">
        <p class="job-order-status text-safari">Job Order Status</p>
        <div class="stepper-container">
            <ul class="stepper">
                <ng-container *ngIf="job_order_details.job_order_status == 2 || job_order_details.job_order_status == 3 || job_order_details.job_order_status == 4">
                    <li class="step active">
                        <span class="dot">
                            <span class="vector" style="color:white;margin-left: 4px;"><i class="fa fa-check" aria-hidden="true"></i></span>
                        </span>
                        <span class="job-order-submitted upper-text text-safari">J.O Submitted</span>
                        <span class="lower-text fs-14 fw-400" *ngIf='job_order_submitted'>{{ job_order_submitted | transformDate: '': 'lll'}}
                        </span>
                    </li>
                    <li *ngIf="job_order_details.job_order_status == 2" class="step inactive">
                        <span class="dot">
                            <span class="vector"></span>
                            <div class="current"></div>
                        </span>
                        <span class="job-order-proccessed text-safari">Processed</span>
                        <span class="lower-text">{{ job_order_processed | transformDate: '': 'lll'}}</span>
                    </li>
                    <li *ngIf="job_order_details.job_order_status == 3 || job_order_details.job_order_status == 4" class="step active-limit">
                        <span class="dot">
                            <span class="vector" style="color:white;margin-left: 4px;"><i class="fa fa-check" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">Processed</span>
                        <span class="lower-text">{{ job_order_processed |  transformDate: '': 'lll'}}</span>
                    </li>
                    <li *ngIf="job_order_details.job_order_status == 3" class="step active-limit">
                        <span class="dot">
                            <span class="vector"></span>
                            <div class="current"></div>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">Delivered</span>
                        <span class="lower-text">{{ job_order_delivered | date: 'MMM dd, yyyy  -  h:mm a'}}</span>
                    </li>
                    <li *ngIf="job_order_details.job_order_status == 4" class="step active-limit">
                        <span class="dot">
                            <span class="vector" style="color:white;margin-left: 4px;"><i class="fa fa-check" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">Delivered</span>
                        <span class="lower-text">{{ job_order_delivered | transformDate: '': 'lll'}}</span>
                    </li>
                    <li *ngIf="job_order_details.job_order_status == 2" class="step inactive">
                        <span class="dot">
                            <span class="vector"></span>
                        </span>
                        <span class="upper-text text-secondary fs-16 text-safari">Delivered</span>
                        <span class="lower-text">{{ job_order_delivered | date: 'MMM dd, yyyy  -  h:mm a'}}</span>
                    </li>
                </ng-container>
                <ng-container *ngIf="job_order_details.job_order_status == 5">
                    <li class="step danger">
                        <span class="dot">
                            <span class="vector" style="color:white;margin-left: 4px;"><i class="fa fa-check" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">J.O Submitted</span>
                        <span class="lower-text fs-12 fw-400">{{ job_order_submitted | transformDate: '': 'lll'}}
                        </span>
                    </li>
                    <li class="step danger-limit">
                        <span class="dot">
                            <span class="vector"style="color:white;margin-left: 6px;padding:1px;"><i class="fa fa-times" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">Processed</span>
                        <span class="lower-text fs-12 fw-400">J.O Request Declined</span>
                    </li>
                    <li class="step danger-inactive">
                        <span class="dot">
                            <span class="vector"></span>
                        </span>
                        <span class="upper-text text-secondary fs-16">Delivered</span>
                        <span class="lower-text"></span>
                    </li>
                </ng-container>



                <!-- canceled -->
                <ng-container *ngIf="job_order_details.job_order_status == 7">
                    <li class="step danger">
                        <span class="dot">
                            <span class="vector" style="color:white;margin-left: 4px;"><i class="fa fa-check" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">J.O Submitted</span>
                        <span class="lower-text fs-12 fw-400">{{ job_order_submitted | transformDate: '': 'lll'}}
                        </span>
                    </li>
                    <li class="step danger-limit">
                        <span class="dot">
                            <span class="vector"style="color:white;margin-left: 6px;padding:1px;"><i class="fa fa-times" aria-hidden="true"></i></span>
                        </span>
                        <span class="upper-text fw-700 fs-14 text-safari">Canceled</span>
                        <span class="lower-text fs-12 fw-400">J.O Request Canceled</span>
                    </li>
                    <li class="step danger-inactive">
                        <span class="dot">
                            <span class="vector"></span>
                        </span>
                        <span class="upper-text text-secondary fs-16">Delivered</span>
                        <span class="lower-text"></span>
                    </li>
                </ng-container>
                 <!--end canceled -->

            </ul>
        </div>
    </div>
    <div *ngIf="job_order_details.job_order_status == 5" class="decline-msg-container mt-15 d-flex align-items-center">
        <div class="d-flex align-items-center">
            <svg width="51" height="51" viewBox="0 0 51 51" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle opacity="0.2" cx="25.5" cy="25.5" r="25.5" fill="#DD1003"/>
                <circle cx="25.8333" cy="25.8333" r="19.8333" fill="#DD1003"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M30.9998 29.75V24.75C30.9998 21.68 29.3698 19.11 26.4998 18.43V17.75C26.4998 16.92 25.8298 16.25 24.9998 16.25C24.1698 16.25 23.4998 16.92 23.4998 17.75V18.43C20.6398 19.11 18.9998 21.67 18.9998 24.75V29.75L16.9998 31.75V32.75H32.9998V31.75L30.9998 29.75ZM24.9998 35.75C26.0998 35.75 26.9998 34.85 26.9998 33.75H22.9998C22.9998 34.85 23.8998 35.75 24.9998 35.75ZM20.9998 30.75H28.9998V24.75C28.9998 22.27 27.4898 20.25 24.9998 20.25C22.5098 20.25 20.9998 22.27 20.9998 24.75V30.75ZM20.5798 17.83L19.1498 16.4C16.7498 18.23 15.1698 21.05 15.0298 24.25H17.0298C17.1798 21.6 18.5398 19.28 20.5798 17.83ZM34.9698 24.25H32.9698C32.8198 21.6 31.4498 19.28 29.4298 17.83L30.8498 16.4C33.2398 18.23 34.8198 21.05 34.9698 24.25Z" fill="white"/>
                </svg>                     
        </div>
        <div class="col-md-9 d-flex flex-column ml-10">
            <p class="fs-14 fw-700 text-safari">Thee Print declined this request.</p>
            <span class="fs-14 fw-400">{{remarks}}</span>
        </div>
    </div>

    <div class="row">
        <div>
            <p class="general-details ml-15 mt-10 mb-30 text-safari">General Details</p>
        </div>

        <div class="col-md-12">
                <p class="payment-status">Payment Status</p>    
                <span *ngIf="job_order_details.job_order_payment_status == 0  &&job_order_details.job_order_status != 7 &&job_order_details.job_order_status != 5" class="badge_pending">Pending</span>
                <span *ngIf="job_order_details.job_order_payment_status == 1" class="badge_paid">Paid</span>
                <span *ngIf="job_order_details.job_order_status == 7" class="fw-700 pl-38 fs-14">- -</span>
                <span *ngIf="job_order_details.job_order_status == 5" class="fw-700 pl-38 fs-14">- -</span>
                <span *ngIf="job_order_details.job_order_payment_status == 1" class="badge_paid ml-10">{{job_order_details.job_order_payment_date | transformDate: '': 'lll'}}</span>
        </div>
    </div>

    <div class="row mt-40">
        <div class="col-md-6">
            <p class="proj-name">Project Name</p>
            <span class="fs-16">{{job_order_details.job_order_project_name}}</span>
        </div>
        
        <div class="col-md-5">
            <p class="due-date">Due Date</p>
            <span class="fs-16">{{job_order_details.job_order_due_date |  transformDate: '': 'L'}}</span>
        </div>
    </div>

    <div class="row mt-30">
        <div class="col-md-6">
            <p class="shipping-add">Shipping Address</p>
            <p class="fs-16 fw-700 text-safari">{{job_order_details.company_address_label}}</p>
            <span class="fs-16">{{job_order_details.company_address}}</span>
        </div>
    </div>

    <div class="row mt-30">
        <div class="col-md-6">
            <p class="fs-14 fw-400 text-secondary">Contact Person</p>
            <span class="fs-16">{{job_order_details.company_address_person_firstname}} {{job_order_details.company_address_person_lastname}}</span>    
        </div>

        <div class="col-md-5">
            <p class="cont-person">Contact Number</p>
            <span class="fs-16">{{job_order_details.company_address_contact}}</span>
        </div>
    </div>

    <div class="row mt-30">
        <div class="col-md-6">
            <p class="remarks">Remarks</p>
            <p>{{job_order_details.job_order_remarks}}</p>
        </div>
    </div>
    <div class="row ml--20 mr--20">
        <hr>
        <div style="padding: 20px 15px 10px 15px !important; width: 100%;">
            <p class="quotation-details text-safari ">Quotation Details</p>
            <table class="table table-borderless w-100-per">
                <thead>
                    <tr>
                      <th class="text-secondary fs-14  w-30-per"><p class="text-safari fw-700">Product</p></th>
                      <th class="text-secondary text-safari fs-14 fw-700 w-30-per"><p class="text-safari">Item Description</p></th>
                      <th class="text-secondary text-safari fs-14 fw-700 w-15-per"><p class="text-safari">Dimensions</p></th>
                      <th class="text-secondary text-safari fs-14 fw-700 w-10-per text-center"><p class="text-safari">Qty</p></th>
                      <th class="text-secondary text-safari fs-14 fw-700 w-20-per text-center"><p class="text-safari">Unit Price</p></th>
                      <th class="text-secondary text-safari fs-14 fw-700 w-25-per text-center"><p class="text-safari">Total Amount</p></th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let job_order of order_items">
                        <td class="fs-16">({{job_order.machine_print}})<p>{{job_order.product_media}}</p></td>
                        <td class="fs-16">{{job_order.job_order_item_remark}}</td>
                        <td class="fs-16">
                            <span class="fs-16" *ngIf="job_order.job_order_item_unit == 0">{{job_order.job_order_item_length}} in x {{job_order.job_order_item_width}} in</span>
                            <span class="fs-16" *ngIf="job_order.job_order_item_unit == 1">{{job_order.job_order_item_length}} ft x {{job_order.job_order_item_width}} ft</span>
                        </td>
                        <td class="fs-16 text-center">{{job_order.job_order_item_qty}}</td>
                        <td class="fs-16 text-center">{{job_order.job_order_item_price | currency }}</td>
                        <td class="fs-16 text-center">{{job_order.total_price | currency }}</td>
                    </tr>
                </tbody>
            </table>
            <hr class="mb-0" style="border: 2px dashed #C2CBD7 !important; border-top: none !important;">
            <div class="col-md-5 pr-0" style="float: right;">
                <div class="paper_rip" >
                    <div class="d-flex flex-column">
                        <div class="d-flex">
                            <span class="fs-16 fw-700 text-secondary text-safari">Subtotal</span>
                            <span class="fs-16 fw-700 ml-auto text-safari" style="color: #0A0929;">{{subTotal | currency}}</span>
                        </div>
                        <!-- <div class="d-flex mt-15">
                            <span class="fs-16 fw-700 text-secondary">VAT(12%)</span>
                            <span class="fs-16 fw-700 ml-auto" style="color: #0A0929;">{{vat | currency}}</span>
                        </div> -->
                        <div class="d-flex mt-25">
                            <span class="fs-16 fw-700 text-secondary text-safari">Total</span>
                            <span class="fs-24 fw-700 total ml-auto text-safari text-total_safari">{{gross | currency}}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</ng-container>
<ngx-smart-modal #successUpdate identifier="successUpdate" [customClass]="'modal-checkin-class nsm-centered'" closable="false">
    <div class="card-body">
        <div class="d-flex justify-content-center">
            <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.08" fill-rule="evenodd" clip-rule="evenodd" d="M34 -1.03315e-06C52.7782 -1.03315e-06 68 15.2231 68 33.9992C68 52.7769 52.7782 68 34 68C15.2218 68 0 52.7769 0 33.9992C0 15.2231 15.2218 -1.03315e-06 34 -1.03315e-06Z" fill="#049561"/>
                <path d="M28.6585 40.4583L21.7085 33.5083L19.3418 35.8583L28.6585 45.175L48.6585 25.175L46.3085 22.825L28.6585 40.4583Z" fill="#00A651"/>
            </svg> 
        </div> 
        <div class="mt-30 d-flex justify-content-center">
            <p class="fs-20 fw-700 text-header">Job order request has been Archived!</p>
        </div>
        <div class="mt-15 d-flex justify-content-center">
            <p class="fs-14 text-detail tC pl-100 pr-100">Your job order request has been moved to your archived folder.</p>
        </div>
        <div class="mt-15 d-flex justify-content-center">
            <button class="bttn btn-primary-pink d-flex align-items-center justify-content-center" (click)="closeModal()">View archive</button>
        </div>     
    </div>
</ngx-smart-modal>

<ngx-smart-modal #deleteJO identifier="deleteJO" [customClass]="'modal-checkin-class nsm-centered'" closable="false">
    <div class="card-body">
        <div class="d-flex justify-content-center">
            <svg width="68" height="68" viewBox="0 0 68 68" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path opacity="0.08" fill-rule="evenodd" clip-rule="evenodd" d="M34 -1.03315e-06C52.7782 -1.03315e-06 68 15.2231 68 33.9992C68 52.7769 52.7782 68 34 68C15.2218 68 0 52.7769 0 33.9992C0 15.2231 15.2218 -1.03315e-06 34 -1.03315e-06Z" fill="#DD1003"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M28.059 19.0996H40.741L49.7 28.0586V40.7406L40.741 49.6996H28.059L19.1 40.7406V28.0586L28.059 19.0996ZM39.33 46.2996L46.3 39.3296V29.4696L39.33 22.4996H29.47L22.5 29.4696V39.3296L29.47 46.2996H39.33ZM34.4 39.4996C33.4611 39.4996 32.7 40.2607 32.7 41.1996C32.7 42.1385 33.4611 42.8996 34.4 42.8996C35.3389 42.8996 36.1 42.1385 36.1 41.1996C36.1 40.2607 35.3389 39.4996 34.4 39.4996ZM36.1 25.8996H32.7V37.7996H36.1V25.8996Z" fill="#DD1003"/>
            </svg>    
        </div> 
        <div class="mt-30 d-flex justify-content-center">
            <p class="fs-20 fw-700 text-header">Do you want to cancel this job order request?</p>
        </div>
        <div class="mt-15 d-flex justify-content-end">
           <div>
                <button class="bttn btn-primary-pink d-flex align-items-center justify-content-center mr-30" (click)="closeDelete()">No</button>
           </div>
            <div>
                <button class="bttn btn-primary-pink d-flex align-items-center justify-content-center"(click)="deleteRequest(job_order_details.job_order_request_id)">Yes</button>
            </div>
           
        </div>     
    </div>
</ngx-smart-modal>
<ngx-spinner bdColor = "rgba(0, 0, 0, 0.8)" size = "medium" color = "#fff" type = "ball-spin" [fullScreen] = "true"><p style="color: white" > loading... </p></ngx-spinner>